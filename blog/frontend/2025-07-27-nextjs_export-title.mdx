---
title: Next JS + gh Pages ë°°í¬ ì‚½ì§ˆ í›„ê¸°
authors: [hyeonlim]
tags: [TIL, Frontend]
---

{/* truncate */}

## ë¬¸ì œ

Next.js App Router(`app/` ë””ë ‰í† ë¦¬)ë¡œ ë§Œë“  ì‚¬ì´íŠ¸ë¥¼ GitHub Pagesì— ë°°í¬í•˜ëŠ” ì™€ì¤‘ì— ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ëœ¨ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

```bash
> next export
â¨¯ next export has been removed in favor of 'output: export' in next.config.js
```

App Routerì—ì„œëŠ” `next export` ëª…ë ¹ì–´ê°€ **ì™„ì „íˆ ì œê±°**ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ì•Œì•˜ìŠµë‹ˆë‹¤.. ã… 

## ì˜¬ë°”ë¥¸ ì„¤ì • ë°©ë²•

### 1. next.config.js ì„¤ì •

```typescript
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  output: "export",
  assetPrefix: "https://<USERNAME>.github.io/<REPO_NAME>/",
  trailingSlash: true, // ì„ íƒì‚¬í•­: URL ëì— ìŠ¬ë˜ì‹œ ì¶”ê°€
};

export default nextConfig;
```

**í•µì‹¬**: `output: 'export'` ì„¤ì •ë§Œ í•˜ë©´ `next build` ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ `out/` í´ë”ê°€ ìƒì„±ë©ë‹ˆë‹¤.

### 2. package.json ìŠ¤í¬ë¦½íŠ¸

```json
{
  "scripts": {
    "build": "next build"
  }
}
```

âŒ `"export": "next export"` ì¶”ê°€í•˜ë©´ ì•ˆë©ë‹ˆë‹¤.
âœ… `build` ëª…ë ¹ì–´ë§Œ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤.

### 3. GitHub Actions ì›Œí¬í”Œë¡œìš°

```yaml
name: Deploy to GitHub Pages

on:
  push:
    branches: [main]
    paths: ["app/**"]
  workflow_dispatch: {} # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 18
          cache: "npm"
          cache-dependency-path: app/package-lock.json

      - name: Install dependencies
        run: npm ci
        working-directory: app

      - name: Build
        run: npm run build
        working-directory: app

      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./app/out
```

## ğŸ” ì£¼ìš” ë³€ê²½ì‚¬í•­ ìš”ì•½

| ê¸°ì¡´ Pages Router    | ìƒˆë¡œìš´ App Router       |
| -------------------- | ----------------------- |
| `next export` ëª…ë ¹ì–´ | `output: 'export'` ì„¤ì • |
| ë³„ë„ export ë‹¨ê³„     | `next build`ì— í†µí•©     |
| `out/` ìˆ˜ë™ ìƒì„±     | ìë™ ìƒì„±               |

## ğŸ‰ ë§ˆë¬´ë¦¬

`next export` ëª…ë ¹ì–´ì— ì˜ì¡´í•˜ë˜ ê¸°ì¡´ ë°©ì‹ì—ì„œ ë²—ì–´ë‚˜ `output: 'export'` ì„¤ì • í•˜ë‚˜ë¡œ ê¹”ë”í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
